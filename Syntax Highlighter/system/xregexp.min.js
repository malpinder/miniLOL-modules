var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");
(function(){function k(a,b){if(!XRegExp.isRegExp(a))throw TypeError("type RegExp expected");var c=a._xregexp;a=XRegExp(a.source,p(a)+(b||""));if(c)a._xregexp={source:c.source,captureNames:c.captureNames?c.captureNames.slice(0):null};return a}function p(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function u(a,b,c,e){var f=l.length,d,h,g;m=true;try{for(;f--;){g=l[f];if(c&g.scope&&(!g.trigger||g.trigger.call(e))){g.pattern.lastIndex=b;if((h=
g.pattern.exec(a))&&h.index===b){d={output:g.handler.call(e,h,c),match:h};break}}}}catch(j){throw j;}finally{m=false}return d}function n(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(c=c||0;c<a.length;c++)if(a[c]===b)return c;return-1}XRegExp=function(a,b){var c=[],e=XRegExp.OUTSIDE_CLASS,f=0,d,h;if(XRegExp.isRegExp(a)){if(b!==undefined)throw TypeError("can't supply flags when constructing one RegExp from another");return k(a)}if(m)throw Error("can't call the XRegExp constructor within token definition functions");
b=b||"";for(d={hasNamedCapture:false,captureNames:[],hasFlag:function(g){return b.indexOf(g)>-1},setFlag:function(g){b+=g}};f<a.length;)if(h=u(a,f,e,d)){c.push(h.output);f+=h.match[0].length||1}else if(h=i.exec.call(o[e],a.slice(f))){c.push(h[0]);f+=h[0].length}else{h=a.charAt(f);if(h==="[")e=XRegExp.INSIDE_CLASS;else if(h==="]")e=XRegExp.OUTSIDE_CLASS;c.push(h);f++}c=RegExp(c.join(""),i.replace.call(b,v,""));c._xregexp={source:a,captureNames:d.hasNamedCapture?d.captureNames:null};return c};XRegExp.version=
"1.5.0";XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var w=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,v=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,q=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,m=false,l=[],i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},x=i.exec.call(/()??/,"")[1]===undefined,r=function(){var a=/^/g;i.test.call(a,"");return!a.lastIndex}(),y=function(){var a=/x/g;i.replace.call("x",a,"");return!a.lastIndex}(),
s=RegExp.prototype.sticky!==undefined,o={};o[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;o[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(a,b,c,e){l.push({pattern:k(a,"g"+(s?"y":"")),handler:b,scope:c||XRegExp.OUTSIDE_CLASS,trigger:e||null})};XRegExp.cache=function(a,b){var c=a+"/"+(b||"");return XRegExp.cache[c]||
(XRegExp.cache[c]=XRegExp(a,b))};XRegExp.copyAsGlobal=function(a){return k(a,"g")};XRegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};XRegExp.execAt=function(a,b,c,e){b=k(b,"g"+(e&&s?"y":""));b.lastIndex=c=c||0;a=b.exec(a);return e?a&&a.index===c?a:null:a};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens");}};XRegExp.isRegExp=function(a){return Object.prototype.toString.call(a)==="[object RegExp]"};XRegExp.iterate=
function(a,b,c,e){for(var f=k(b,"g"),d=-1,h;h=f.exec(a);){c.call(e,h,++d,a,f);f.lastIndex===h.index&&f.lastIndex++}if(b.global)b.lastIndex=0};XRegExp.matchChain=function(a,b){return function c(e,f){var d=b[f].regex?b[f]:{regex:b[f]},h=k(d.regex,"g"),g=[],j;for(j=0;j<e.length;j++)XRegExp.iterate(e[j],h,function(t){g.push(d.backref?t[d.backref]||"":t[0])});return f===b.length-1||!g.length?g:c(g,f+1)}([a],0)};RegExp.prototype.apply=function(a,b){return this.exec(b[0])};RegExp.prototype.call=function(a,
b){return this.exec(b)};RegExp.prototype.exec=function(a){var b=i.exec.apply(this,arguments),c;if(b){if(!x&&b.length>1&&n(b,"")>-1){c=RegExp(this.source,i.replace.call(p(this),"g",""));i.replace.call(a.slice(b.index),c,function(){for(var f=1;f<arguments.length-2;f++)if(arguments[f]===undefined)b[f]=undefined})}if(this._xregexp&&this._xregexp.captureNames)for(var e=1;e<b.length;e++)if(c=this._xregexp.captureNames[e-1])b[c]=b[e];!r&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}return b};
if(!r)RegExp.prototype.test=function(a){(a=i.exec.call(this,a))&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--;return!!a};String.prototype.match=function(a){XRegExp.isRegExp(a)||(a=RegExp(a));if(a.global){var b=i.match.apply(this,arguments);a.lastIndex=0;return b}return a.exec(this)};String.prototype.replace=function(a,b){var c=XRegExp.isRegExp(a),e,f;if(c&&typeof b.valueOf()==="string"&&b.indexOf("${")===-1&&y)return i.replace.apply(this,arguments);if(c){if(a._xregexp)e=a._xregexp.captureNames}else a+=
"";if(typeof b==="function")f=i.replace.call(this,a,function(){if(e){arguments[0]=new String(arguments[0]);for(var d=0;d<e.length;d++)if(e[d])arguments[0][e[d]]=arguments[d+1]}if(c&&a.global)a.lastIndex=arguments[arguments.length-2]+arguments[0].length;return b.apply(null,arguments)});else f=i.replace.call(this+"",a,function(){var d=arguments;return i.replace.call(b,w,function(h,g,j){if(g)switch(g){case "$":return"$";case "&":return d[0];case "`":return d[d.length-1].slice(0,d[d.length-2]);case "'":return d[d.length-
1].slice(d[d.length-2]+d[0].length);default:j="";g=+g;if(!g)return h;for(;g>d.length-3;){j=String.prototype.slice.call(g,-1)+j;g=Math.floor(g/10)}return(g?d[g]||"":"$")+j}else{g=+j;if(g<=d.length-3)return d[g];g=e?n(e,j):-1;return g>-1?d[g+1]:h}})});if(c&&a.global)a.lastIndex=0;return f};String.prototype.split=function(a,b){if(!XRegExp.isRegExp(a))return i.split.apply(this,arguments);var c=this+"",e=[],f=0,d,h;if(b===undefined||+b<0)b=Infinity;else{b=Math.floor(+b);if(!b)return[]}for(a=XRegExp.copyAsGlobal(a);d=
a.exec(c);){if(a.lastIndex>f){e.push(c.slice(f,d.index));d.length>1&&d.index<c.length&&Array.prototype.push.apply(e,d.slice(1));h=d[0].length;f=a.lastIndex;if(e.length>=b)break}a.lastIndex===d.index&&a.lastIndex++}if(f===c.length){if(!i.test.call(a,"")||h)e.push("")}else e.push(c.slice(f));return e.length>b?e.slice(0,b):e};XRegExp.addToken(/\(\?#[^)]*\)/,function(a){return i.test.call(q,a.input.slice(a.index+a[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);
return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,function(a){this.captureNames.push(a[1]);this.hasNamedCapture=true;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(a){var b=n(this.captureNames,a[1]);return b>-1?"\\"+(b+1)+(isNaN(a.input.charAt(a.index+a[0].length))?"":"(?:)"):a[0]});XRegExp.addToken(/\[\^?]/,function(a){return a[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(a){this.setFlag(a[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(a){return i.test.call(q,
a.input.slice(a.index+a[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();
