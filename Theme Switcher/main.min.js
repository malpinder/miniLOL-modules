miniLOL.module.create("Theme Switcher",{version:"0.2.3",type:"passive",aliases:["ThemeSwitcher"],initialize:function(){miniLOL.resource.get("miniLOL.config").load(this.root+"/resources/config.xml");this.Themes=miniLOL.utils.execute(this.root+"/system/Themes.min.js");this.themes=new this.Themes;this.Template=miniLOL.utils.execute(this.root+"/system/Template.min.js");this.template=new this.Template(this.root);if(!this.themes.load(this.root+"/resources/themes.xml"))return false;var a=(new CookieJar).get("theme");
this.theme=this.themes.exists(a)?a:miniLOL.config["Theme Switcher"].defaultTheme;Event.observe(document,":module.loaded",function(b){if(b.memo=="Theme Switcher"){b=location.href.toQueryParams();b.theme?miniLOL.module.execute("Theme Switcher",{theme:b.theme}):miniLOL.module.execute("Theme Switcher",{theme:miniLOL.module.get("Theme Switcher").theme})}})},execute:function(a){a.theme=a.theme||this.theme;if(a.choose){this.theme=a.theme;(new CookieJar({expires:31536E3})).set("theme",a.theme);a.apply&&this.execute({theme:a.theme})}else a.chooser?
miniLOL.content.set(this.template.apply("global",this.themes.toArray())):miniLOL.theme.load(a.theme,true)}});
