(function(){return Class.create({initialize:function(a){this.root=a;var b=this;this.resource=new miniLOL.Resource("IHM.browsers",{load:function(e){new Ajax.Request(e,{method:"get",asynchronous:false,onSuccess:function(c){$A(c.responseXML.getElementsByTagName("hate")).each(function(d){b.browsers[d.getAttribute("browser")]={wait:parseFloat(d.getAttribute("wait"))||23,message:d.firstChild.nodeValue}})},onFailure:function(c){miniLOL.error("Error while loading IHM's hatred.xml (#{error})".interpolate({error:c.status}))}})},
clear:function(){b.browsers=this.data={}}});this.resource.load(this.root+"/resources/hatred.xml")},apply:function(){function a(d){$("IHM").setStyle({width:document.viewport.getWidth()+"px",height:document.viewport.getHeight()+"px"});$("yiff").setStyle({top:(document.viewport.getHeight()-$("yiff").getHeight())/2+"px",left:(document.viewport.getWidth()-$("yiff").getWidth())/2+"px"});d&&a.defer()}var b;for(var e in Prototype.Browser)if(Prototype.Browser[e]){b=this.browsers[e];break}if(!b)return false;
var c=new Element("div",{id:"IHM",style:"z-index: 9001; position: absolute; top: 0; left: 0; background: black; color: white; font-weight: bold; font-size: 23px; text-align: center;"});c.update("<div id='yiff' style='position: absolute;'>"+b.message+"</div>");$(document.body).insert(c);Event.observe(window,"resize",a);Event.observe(document,":initialized",a);a.defer(true);setTimeout(function(){c.remove();Event.stopObserving(window,"resize",a)},b.wait*1E3)}})})();
